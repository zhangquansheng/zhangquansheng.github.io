(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{339:function(t,a,s){"use strict";s.r(a);var n=s(10),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"cat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat"}},[t._v("#")]),t._v(" CAT")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/dianping/cat",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("cat")]),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://github.com/dianping/cat/wiki/readme_server",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("部署")]),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://github.com/ctripcorp/vi",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("vi")]),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"持续集成maven打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持续集成maven打包"}},[t._v("#")]),t._v(" 持续集成maven打包")]),t._v(" "),a("p",[a("strong",[t._v("使用jenkins或者阿里云云效等持续集成工具，需要把cat-client-3.0.0.jar 和 cornerstone-0.2.1.jar 先导入到依赖的私服中")])]),t._v(" "),a("h2",{attrs:{id:"部署点评cat监控项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署点评cat监控项目"}},[t._v("#")]),t._v(" 部署点评Cat监控项目")]),t._v(" "),a("ul",[a("li",[t._v("使用maven本地编译CAT找不到org.unidal.maven.plugins:codegen-maven-plugin:2.3.2的解决办法\n"),a("ol",[a("li",[t._v("需要把cat-mvn-repo.zip下cat所需要的包放在本地maven仓库中或者私服")]),t._v(" "),a("li",[t._v("下载codegen-2.3.2.jar放在本地maven仓库中或者私服,需要在这里面下载https://github.com/dianping/cat/tree/mvn-repo")]),t._v(" "),a("li",[t._v("删除本地仓库的报错位置的 _remote.repositories 文件")]),t._v(" "),a("li",[t._v("执行mvn命令； mvn clean install -Dmaven.test.skip=true  -U")])])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/harrychinese/p/dianping-cat-server-setup.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("windows 下 war 包部署开发环境"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"埋点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#埋点"}},[t._v("#")]),t._v(" 埋点")]),t._v(" "),a("ul",[a("li",[t._v("spring boot")]),t._v(" "),a("li",[t._v("mybatis\n"),a("blockquote",[a("p",[t._v("需要使用MybatisPlus或者zc-db-spring-boot-starter")])])]),t._v(" "),a("li",[t._v("SpringService")]),t._v(" "),a("li",[t._v("feign-okhttp\n"),a("blockquote",[a("p",[t._v("需要使用 feign.okhttp.OkHttpClient 或者 zc-feign-spring-boot-stater")])])])]),t._v(" "),a("p",[t._v("CAT服务端，客户端对机器均有一定的配置要求。")]),t._v(" "),a("h2",{attrs:{id:"插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[t._v("#")]),t._v(" 插件")]),t._v(" "),a("h3",{attrs:{id:"logback配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logback配置"}},[t._v("#")]),t._v(" Logback配置")]),t._v(" "),a("p",[t._v("如果需要使用Cat自定义的Appender，需要在logback.xml中添加如下配置：")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("appender")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("CatAppender"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.dianping.cat.logback.CatLogbackAppender"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("appender")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("root")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("level")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("appender-ref")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("CatAppender"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("root")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h2",{attrs:{id:"常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("java.lang.IllegalArgumentException: warning no match for this type name: 原因： SpringAop注解的时候,写错了类名会导致的这个问题")])]),t._v(" "),a("li",[a("p",[t._v("显示“有问题的CAT服务器[ip]”,请核查一下配置文件以及客户端路由中，都修改为内网ip")])]),t._v(" "),a("li",[a("p",[t._v("CAT的TOMCAT启动以后，重启请不要使用./shutdown.sh ，使用 ps -ef|grep tomcat 关闭(kill -9 )所有cat启动的进程")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);