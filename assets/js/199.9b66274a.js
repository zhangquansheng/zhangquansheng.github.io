(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{465:function(s,t,a){"use strict";a.r(t);var n=a(10),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"aop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aop"}},[s._v("#")]),s._v(" AOP")]),s._v(" "),t("p",[s._v("å¦‚ä½•æ­£ç¡®ä½¿ç”¨"),t("code",[s._v("Spring")]),s._v("è¿›è¡Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œè¯·å‚è€ƒ"),t("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#aop",target:"_blank",rel:"noopener noreferrer"}},[s._v("å®˜æ–¹æ–‡æ¡£"),t("OutboundLink")],1),s._v(", æœ¬ç¯‡ä¸»è¦è®²å®ƒçš„å®ç°åŸç†ã€‚")]),s._v(" "),t("p",[s._v("é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAspect-oriented Programming "),t("code",[s._v("AOP")]),s._v("ï¼‰æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-oriented Programming "),t("code",[s._v("OOP")]),s._v("ï¼‰çš„è¡¥å……ï¼Œå®ƒæä¾›äº†å¦ä¸€ç§å…³äºç¨‹åºç»“æ„çš„æ€è€ƒæ–¹å¼ã€‚")]),s._v(" "),t("h2",{attrs:{id:"oop-å’Œ-aop-åˆ†åˆ«è§£å†³çš„é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oop-å’Œ-aop-åˆ†åˆ«è§£å†³çš„é—®é¢˜"}},[s._v("#")]),s._v(" OOP å’Œ AOP åˆ†åˆ«è§£å†³çš„é—®é¢˜")]),s._v(" "),t("p",[s._v("ä¸‹é¢æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ª"),t("code",[s._v("OOP")]),s._v("çš„ä¾‹å­ï¼š")]),s._v(" "),t("p",[s._v("ä¾‹å¦‚ï¼šç°æœ‰ä¸‰ä¸ªç±»ï¼Œ"),t("code",[s._v("Horse")]),s._v("ã€"),t("code",[s._v("Pig")]),s._v("ã€"),t("code",[s._v("Dog")]),s._v("ï¼Œè¿™ä¸‰ä¸ªç±»ä¸­éƒ½æœ‰ "),t("code",[s._v("eat()")]),s._v(" å’Œ "),t("code",[s._v("run()")]),s._v(" ä¸¤ä¸ªæ–¹æ³•ã€‚")]),s._v(" "),t("p",[s._v("é€šè¿‡ "),t("code",[s._v("OOP")]),s._v(" æ€æƒ³ä¸­çš„ç»§æ‰¿ï¼Œæˆ‘ä»¬å¯ä»¥æå–å‡ºä¸€ä¸ª "),t("code",[s._v("Animal")]),s._v(" çš„çˆ¶ç±»ï¼Œç„¶åå°† "),t("code",[s._v("eat")]),s._v(" å’Œ "),t("code",[s._v("run")]),s._v(" æ–¹æ³•æ”¾å…¥çˆ¶ç±»ä¸­ï¼Œ"),t("code",[s._v("Horse")]),s._v("ã€"),t("code",[s._v("Pig")]),s._v("ã€"),t("code",[s._v("Dog")]),s._v("é€šè¿‡ç»§æ‰¿"),t("code",[s._v("Animal")]),s._v("ç±»å³å¯è‡ªåŠ¨è·å¾—"),t("code",[s._v("eat()")]),s._v("å’Œ"),t("code",[s._v("run()")]),s._v("æ–¹æ³•ï¼Œè¿™æ ·å°†ä¼šå°‘äº›å¾ˆå¤šé‡å¤çš„ä»£ç ã€‚")]),s._v(" "),t("p",[s._v("å›¾ç¤ºï¼š\n"),t("img",{attrs:{src:"/img/spring/oop.png",alt:"oop"}})]),s._v(" "),t("p",[t("code",[s._v("OOP")]),s._v("ç¼–ç¨‹æ€æƒ³å¯ä»¥è§£å†³å¤§éƒ¨åˆ†çš„ä»£ç é‡å¤é—®é¢˜ã€‚ä½†æ˜¯æœ‰ä¸€äº›é—®é¢˜æ˜¯å¤„ç†ä¸äº†çš„ã€‚æ¯”å¦‚åœ¨çˆ¶ç±»"),t("code",[s._v("Animal")]),s._v("ä¸­çš„å¤šä¸ªæ–¹æ³•çš„ç›¸åŒä½ç½®å‡ºç°äº†é‡å¤çš„ä»£ç ï¼ŒOOP å°±è§£å†³ä¸äº†,ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * åŠ¨ç‰©çˆ¶ç±»\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Animal")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** èº«é«˜ */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" height"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** ä½“é‡ */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("double")]),s._v(" weight"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("eat")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ€§èƒ½ç›‘æ§ä»£ç ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" start "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸šåŠ¡é€»è¾‘ä»£ç ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I can eat..."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ€§èƒ½ç›‘æ§ä»£ç ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ‰§è¡Œæ—¶é•¿ï¼š"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ€§èƒ½ç›‘æ§ä»£ç ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" start "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸šåŠ¡é€»è¾‘ä»£ç ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I can run..."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ€§èƒ½ç›‘æ§ä»£ç ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ‰§è¡Œæ—¶é•¿ï¼š"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br")])]),t("p",[s._v("è¿™éƒ¨åˆ†é‡å¤çš„ä»£ç ï¼Œä¸€èˆ¬ç»Ÿç§°ä¸º"),t("strong",[s._v("æ¨ªåˆ‡é€»è¾‘ä»£ç ")]),s._v("ã€‚\nå›¾ç¤ºï¼š\n"),t("img",{attrs:{src:"/img/spring/aop-code.webp",alt:"aop-code"}})]),s._v(" "),t("p",[s._v("æ¨ªåˆ‡é€»è¾‘ä»£ç å­˜åœ¨çš„é—®é¢˜ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä»£ç é‡å¤é—®é¢˜")]),s._v(" "),t("li",[s._v("æ¨ªåˆ‡é€»è¾‘ä»£ç å’Œä¸šåŠ¡ä»£ç æ··æ‚åœ¨ä¸€èµ·ï¼Œä»£ç è‡ƒè‚¿ï¼Œä¸å˜ç»´æŠ¤")])]),s._v(" "),t("p",[s._v("é€šè¿‡ä¸Šé¢çš„åˆ†æå¯ä»¥å‘ç°ï¼Œ"),t("code",[s._v("AOP")]),s._v("ä¸»è¦ç”¨æ¥è§£å†³ï¼š"),t("strong",[s._v("åœ¨ä¸æ”¹å˜åŸæœ‰ä¸šåŠ¡é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œå¢å¼ºæ¨ªåˆ‡é€»è¾‘ä»£ç ï¼Œæ ¹æœ¬ä¸Šè§£è€¦åˆï¼Œé¿å…æ¨ªåˆ‡é€»è¾‘ä»£ç é‡å¤ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"spring-aop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-aop"}},[s._v("#")]),s._v(" Spring AOP")]),s._v(" "),t("p",[t("code",[s._v("AOP")]),s._v("åœ¨"),t("code",[s._v("Spring Framework")]),s._v("ä¸­ç”¨äºï¼š")]),s._v(" "),t("ul",[t("li",[s._v("æä¾›"),t("strong",[s._v("å£°æ˜å¼æœåŠ¡")]),s._v("ã€‚æ­¤ç±»æœåŠ¡æœ€é‡è¦çš„æ˜¯"),t("strong",[s._v("å£°æ˜å¼äº‹åŠ¡ç®¡ç†")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("ç”¨æˆ·å¯ä»¥å®ç°è‡ªå®šä¹‰åˆ‡é¢ï¼Œä»¥AOPè¡¥å……å…¶å¯¹OOPçš„ä½¿ç”¨ã€‚ä¾‹å¦‚"),t("strong",[s._v("ControllerLogAspect")]),s._v("ã€‚")])]),s._v(" "),t("p",[t("code",[s._v("Spring AOP")]),s._v("é»˜è®¤å°†"),t("strong",[s._v("æ ‡å‡†JDKåŠ¨æ€ä»£ç†")]),s._v("ç”¨äº"),t("code",[s._v("AOP")]),s._v("ä»£ç†ã€‚æ‰€ä»¥å®ƒå¯ä»¥ä»£ç†ä»»ä½•æ¥å£ï¼ˆæˆ–ä¸€ç»„æ¥å£ï¼‰ã€‚")]),s._v(" "),t("p",[t("code",[s._v("Spring AOP")]),s._v("ä¹Ÿå¯ä»¥ä½¿ç”¨"),t("strong",[s._v("CGLIBä»£ç†")]),s._v("ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¸šåŠ¡å¯¹è±¡æœªå®ç°æ¥å£ï¼Œåˆ™ä½¿ç”¨"),t("code",[s._v("CGLIB")]),s._v("ã€‚"),t("strong",[s._v("ç”±äºå¯¹æ¥å£è€Œä¸æ˜¯å¯¹ç±»è¿›è¡Œç¼–ç¨‹æ˜¯ä¸€ç§å¥½ä¹ æƒ¯(As it is good practice to program to interfaces rather than classes)")]),s._v("ï¼Œå› æ­¤ä¸šåŠ¡ç±»é€šå¸¸å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªä¸šåŠ¡æ¥å£ã€‚")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("å®é™…é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ä»£ç†ï¼Ÿ")]),s._v(" "),t("p",[s._v("æŒ‰ç…§æˆ‘ä»¬ç›®å‰çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œ"),t("code",[s._v("Mapper")]),s._v("æ¥å£ä½¿ç”¨çš„"),t("code",[s._v("JDKåŠ¨æ€ä»£ç†")]),s._v("ï¼Œ"),t("code",[s._v("Service")]),s._v("ã€"),t("code",[s._v("Facade")]),s._v("ã€"),t("code",[s._v("Controller")]),s._v("éƒ½æ˜¯ä½¿ç”¨"),t("code",[s._v("CGLIB")]),s._v("ä»£ç†ã€‚")]),s._v(" "),t("p",[s._v("å¯ä»¥é€šè¿‡åœ¨é¡¹ç›®å¯åŠ¨æ—¶ï¼Œ"),t("code",[s._v("debug")]),s._v(" "),t("code",[s._v("AutowiredFieldElement")]),s._v("ç±»æ¥æŸ¥çœ‹æ³¨å…¥å±æ€§æ—¶ï¼Œä½¿ç”¨çš„æ˜¯å“ªç§æ–¹å¼å®ç°çš„ä»£ç†ç±»ã€‚")])]),s._v(" "),t("p",[s._v("å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/spring/spring-aop-process.jpg",alt:"Spring AOP Process"}})]),s._v(" "),t("p",[s._v("å‚è€ƒæºç å¦‚ä¸‹ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// org.springframework.aop.framework.AopProxyFactory.java")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopProxyFactory")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopProxy")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createAopProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AdvisedSupport")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopConfigException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// org.springframework.aop.framework.DefaultAopProxyFactory.java")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DefaultAopProxyFactory")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopProxyFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Serializable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopProxy")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createAopProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AdvisedSupport")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopConfigException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isOptimize")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isProxyTargetClass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hasNoUserSuppliedProxyInterfaces")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" targetClass "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTargetClass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("targetClass "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopConfigException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"TargetSource cannot determine target class: "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Either an interface or a target is required for proxy creation."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  å¦‚æœæ˜¯æ¥å£ï¼Œä½¿ç”¨JDKåŠ¨æ€ä»£ç†")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("targetClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isInterface")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Proxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isProxyClass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("targetClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JdkDynamicAopProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¦åˆ™ä½¿ç”¨ cglib")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ObjenesisCglibAopProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JdkDynamicAopProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hasNoUserSuppliedProxyInterfaces")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AdvisedSupport")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" ifcs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getProxiedInterfaces")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ifcs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ifcs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isAssignableFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ifcs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("p",[s._v("é™¤äº†ä»¥ä¸Šä¸¤ç§ä»£ç†æ–¹å¼å¤–ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨"),t("code",[s._v("AspectJ")]),s._v(" ï¼Œ"),t("code",[s._v("Spring AOP")]),s._v("å·²ç»é›†æˆäº†"),t("code",[s._v("AspectJ")]),s._v(" ï¼Œ"),t("code",[s._v("AspectJ")]),s._v("åº”è¯¥ç®—çš„ä¸Šæ˜¯"),t("code",[s._v("Java")]),s._v("ç”Ÿæ€ç³»ç»Ÿä¸­æœ€å®Œæ•´çš„"),t("code",[s._v("AOP")]),s._v("æ¡†æ¶äº†ã€‚")]),s._v(" "),t("h2",{attrs:{id:"enableaspectjautoproxy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enableaspectjautoproxy"}},[s._v("#")]),s._v(" @EnableAspectJAutoProxy")]),s._v(" "),t("blockquote",[t("p",[s._v("å¼€å¯æ³¨è§£ç‰ˆçš„AOPåŠŸèƒ½")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Target")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ElementType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Retention")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RetentionPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RUNTIME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Documented")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AspectJAutoProxyRegistrar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EnableAspectJAutoProxy")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ˜¯å¦å¼ºåˆ¶æŒ‡å®šä½¿ç”¨CGLIBä»£ç†")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("proxyTargetClass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * @since 4.3.1 ä»£ç†çš„æš´éœ²æ–¹å¼ï¼šè§£å†³å†…éƒ¨è°ƒç”¨ä¸èƒ½ä½¿ç”¨ä»£ç†çš„åœºæ™¯  é»˜è®¤ä¸ºfalseè¡¨ç¤ºä¸å¤„ç†\n     * trueï¼šè¿™ä¸ªä»£ç†å°±å¯ä»¥é€šè¿‡AopContext.currentProxy()è·å¾—è¿™ä¸ªä»£ç†å¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ï¼ˆThreadLocalé‡Œé¢ï¼‰,ä»è€Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿å¾—åœ¨Springæ¡†æ¶ä¸Šä¸‹æ–‡ä¸­æ‹¿åˆ°å½“å‰ä»£ç†å¯¹è±¡ï¼ˆå¤„ç†äº‹åŠ¡æ—¶å¾ˆæ–¹ä¾¿ï¼‰\n     * å¿…é¡»ä¸ºtrueæ‰èƒ½è°ƒç”¨AopContextå¾—æ–¹æ³•ï¼Œå¦åˆ™æŠ¥é”™ï¼šCannot find current proxy: Set 'exposeProxy' property on Advised to 'true' to make it available.\n     */")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exposeProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// org.springframework.context.annotation.AspectJAutoProxyRegistrar.java")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AspectJAutoProxyRegistrar")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ImportBeanDefinitionRegistrar")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("registerBeanDefinitions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AnnotationMetadata")]),s._v(" importingClassMetadata"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeanDefinitionRegistry")]),s._v(" registry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopConfigUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("registerAspectJAnnotationAutoProxyCreatorIfNecessary")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("registry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AnnotationAttributes")]),s._v(" enableAspectJAutoProxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AnnotationConfigUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("attributesFor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("importingClassMetadata"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EnableAspectJAutoProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("enableAspectJAutoProxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ˜¯å¦å¼ºåˆ¶æŒ‡å®šä½¿ç”¨CGLIBä»£ç†")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("enableAspectJAutoProxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBoolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"proxyTargetClass"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopConfigUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("forceAutoProxyCreatorToUseClassProxying")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("registry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä»£ç†çš„æš´éœ²æ–¹å¼ï¼šè§£å†³å†…éƒ¨è°ƒç”¨ä¸èƒ½ä½¿ç”¨ä»£ç†çš„åœºæ™¯")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("enableAspectJAutoProxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBoolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"exposeProxy"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopConfigUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("forceAutoProxyCreatorToExposeProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("registry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h3",{attrs:{id:"aspectjautoproxyregistrar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aspectjautoproxyregistrar"}},[s._v("#")]),s._v(" AspectJAutoProxyRegistrar ğŸ”¨")]),s._v(" "),t("p",[t("code",[s._v("AspectJAutoProxyRegistrar")]),s._v(" æ˜¯ä¸€ä¸ª "),t("code",[s._v("ImportBeanDefinitionRegistrar")])]),s._v(" "),t("p",[t("code",[s._v("AnnotationAwareAspectJAutoProxyCreator")]),s._v("è¿™ä¸ªç±»å®šä¹‰ä¸º"),t("code",[s._v("BeanDefinition")]),s._v("æ³¨å†Œåˆ°"),t("code",[s._v("Spring")]),s._v("å®¹å™¨ä¸­ï¼Œè¿™æ˜¯é€šè¿‡å®ç°"),t("code",[s._v("ImportBeanDefinitionRegistrar")]),s._v("æ¥å£æ¥è£…è½½çš„.")]),s._v(" "),t("p",[t("code",[s._v("AnnotationAwareAspectJAutoProxyCreator")]),s._v("ç»§æ‰¿äº†"),t("code",[s._v("SmartInstantiationAwareBeanPostProcessor")]),s._v(", ä¹Ÿå°±æ˜¯"),t("code",[s._v("BeanPostProcessor")]),s._v("ï¼Œè¿™ä¸ª"),t("strong",[s._v("åç½®å¤„ç†å™¨")]),s._v("å¯ä»¥æ‹¦æˆªå®ä¾‹åˆ›å»º, åœ¨åˆ›å»ºä¹‹å‰è°ƒç”¨"),t("code",[s._v("postProcessBeforeInstantiation")])]),s._v(" "),t("h2",{attrs:{id:"spring-aop-å’Œ-aspectj-aop-çš„åŒºåˆ«"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-aop-å’Œ-aspectj-aop-çš„åŒºåˆ«"}},[s._v("#")]),s._v(" Spring AOP å’Œ AspectJ AOP çš„åŒºåˆ«")]),s._v(" "),t("p",[t("code",[s._v("Spring AOP")]),s._v("å±äºè¿è¡Œæ—¶å¢å¼ºï¼Œè€Œ"),t("code",[s._v("AspectJ")]),s._v("æ˜¯ç¼–è¯‘æ—¶å¢å¼ºã€‚ "),t("code",[s._v("Spring AOP")]),s._v("åŸºäºä»£ç†("),t("code",[s._v("Proxying")]),s._v(")ï¼Œè€Œ"),t("code",[s._v("AspectJ")]),s._v("åŸºäºå­—èŠ‚ç æ“ä½œ("),t("code",[s._v("Bytecode Manipulation")]),s._v(")ã€‚")]),s._v(" "),t("p",[t("code",[s._v("AspectJ")]),s._v("ç›¸æ¯”äº"),t("code",[s._v("Spring AOP")]),s._v("åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œä½†æ˜¯"),t("code",[s._v("Spring AOP")]),s._v("ç›¸å¯¹æ¥è¯´æ›´ç®€å•ï¼Œ")]),s._v(" "),t("p",[s._v("å¦‚æœæˆ‘ä»¬çš„åˆ‡é¢æ¯”è¾ƒå°‘ï¼Œé‚£ä¹ˆä¸¤è€…æ€§èƒ½å·®å¼‚ä¸å¤§ã€‚ä½†æ˜¯ï¼Œå½“åˆ‡é¢å¤ªå¤šçš„è¯ï¼Œæœ€å¥½é€‰æ‹©"),t("code",[s._v("AspectJ")]),s._v(" ï¼Œå®ƒæ¯”"),t("code",[s._v("Spring AOP")]),s._v("å¿«å¾ˆå¤šã€‚")]),s._v(" "),t("h2",{attrs:{id:"spring-aop-final-æ–¹æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-aop-final-æ–¹æ³•"}},[s._v("#")]),s._v(" Spring AOP final æ–¹æ³•")]),s._v(" "),t("p",[s._v("ç”±äºåœ¨é¡¹ç›®é‡Œé¢ç”¨åˆ°æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ï¼Œåœ¨æŠ½è±¡ç±»é‡Œé¢æœ‰ä¸€ä¸ª"),t("code",[s._v("final")]),s._v("æ–¹æ³•ã€‚"),t("strong",[s._v("è¿™ä¸ª"),t("code",[s._v("final")]),s._v("æ–¹æ³•è°ƒç”¨"),t("code",[s._v("@Autowired")]),s._v("æ³¨è§£çš„å±æ€§å­—æ®µæ—¶å€™æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("æˆ‘ä»¬çŸ¥é“åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¸šåŠ¡å¯¹è±¡æœªå®ç°æ¥å£ï¼Œåˆ™ä½¿ç”¨"),t("code",[s._v("CGLIB")]),s._v("ï¼ˆä¾‹å¦‚ï¼š"),t("code",[s._v("controller")]),s._v("ç±»ï¼ŒæŠ½è±¡ç±»çš„å­ç±»ï¼‰ã€‚æˆ‘ä»¬ç§°ä»£ç†çš„å¯¹è±¡ä¸º"),t("code",[s._v("proxy")]),s._v("ï¼Œ\nè¢«ä»£ç†çš„å¯¹è±¡æ˜¯"),t("code",[s._v("target")]),s._v("ã€‚è€Œå¯¹äº"),t("code",[s._v("final")]),s._v("æ–¹æ³•ï¼Œå­ç±»æ˜¯ä¸èƒ½è¦†ç›–çš„ï¼Œèµ°çš„ä»£ç æµç¨‹ä¾ç„¶æ˜¯"),t("code",[s._v("target")]),s._v("é‡Œé¢çš„ã€‚")]),s._v(" "),t("p",[t("code",[s._v("@Autowired")]),s._v(" "),t("code",[s._v("AutowiredFieldElement")]),s._v(" å®ç°å±æ€§ä¾èµ–æ³¨å…¥æ ¸å¿ƒæºç å¦‚ä¸‹:")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ ¹æ®å®¹å™¨ä¸­`Bean`å®šä¹‰ï¼Œè§£ææŒ‡å®šçš„ä¾èµ–å…³ç³»ï¼Œè·å–ä¾èµ–å¯¹è±¡")]),s._v("\nvalue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" beanFactory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolveDependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("desc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" beanName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" autowiredBeanNames"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" typeConverter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("å…¶å®æœ€æ ¸å¿ƒè¿˜æ˜¯åœ¨"),t("code",[s._v("Bean")]),s._v("å·¥å‚é‡Œï¼Œä¹Ÿå°±æ˜¯å®ƒçš„å”¯ä¸€å†…å»ºå®ç°ç±»"),t("code",[s._v("org.springframework.beans.factory.support.DefaultListableBeanFactory")]),s._v("ã€‚")]),s._v(" "),t("h2",{attrs:{id:"è§£å†³å†…éƒ¨æ–¹æ³•è°ƒç”¨å¯¼è‡´aopå¤±æ•ˆçš„é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³å†…éƒ¨æ–¹æ³•è°ƒç”¨å¯¼è‡´aopå¤±æ•ˆçš„é—®é¢˜"}},[s._v("#")]),s._v(" è§£å†³å†…éƒ¨æ–¹æ³•è°ƒç”¨å¯¼è‡´"),t("code",[s._v("AOP")]),s._v("å¤±æ•ˆçš„é—®é¢˜")]),s._v(" "),t("h3",{attrs:{id:"æ–¹æ³•ä¸€-é€šè¿‡-springutil-getbean-æ‰‹åŠ¨è·å–å¯¹è±¡æ¥è·å–ä»£ç†å¯¹è±¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•ä¸€-é€šè¿‡-springutil-getbean-æ‰‹åŠ¨è·å–å¯¹è±¡æ¥è·å–ä»£ç†å¯¹è±¡"}},[s._v("#")]),s._v(" æ–¹æ³•ä¸€ï¼šé€šè¿‡ SpringUtil.getBean æ‰‹åŠ¨è·å–å¯¹è±¡æ¥è·å–ä»£ç†å¯¹è±¡")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Service")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Slf4j")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DemoService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DemoService")]),s._v(" bean "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringUtil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DemoService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        bean"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendToKafka")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Async")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendToKafka")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h3",{attrs:{id:"æ–¹æ³•äºŒ-é€šè¿‡-aopcontext-è·å–å½“å‰ä»£ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•äºŒ-é€šè¿‡-aopcontext-è·å–å½“å‰ä»£ç†"}},[s._v("#")]),s._v(" æ–¹æ³•äºŒï¼šé€šè¿‡ AopContext è·å–å½“å‰ä»£ç†")]),s._v(" "),t("ul",[t("li",[s._v("ç¬¬ä¸€æ­¥ï¼šéœ€è¦åœ¨å¯åŠ¨ç±»ä¸­å¢åŠ ä»¥ä¸‹æ³¨è§£")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@EnableAspectJAutoProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("exposeProxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ "),t("code",[s._v("AopContext.currentProxy()")]),s._v(" è·å–å½“å‰ä»£ç†ï¼Œè°ƒç”¨å†…éƒ¨æ–¹æ³•")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CurrentImpl")]),s._v(" currentProxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CurrentImpl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AopContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½¿ç”¨ä»£ç†è°ƒç”¨")]),s._v("\n  currentProxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("method")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"æ–¹æ³•ä¸‰-ä¸åŒçš„ç±»ä¹‹é—´è°ƒç”¨å³å¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•ä¸‰-ä¸åŒçš„ç±»ä¹‹é—´è°ƒç”¨å³å¯"}},[s._v("#")]),s._v(" æ–¹æ³•ä¸‰ï¼šä¸åŒçš„ç±»ä¹‹é—´è°ƒç”¨å³å¯")])])}),[],!1,null,null,null);t.default=e.exports}}]);