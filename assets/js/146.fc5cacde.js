(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{417:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"sql-having-子句"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql-having-子句"}},[s._v("#")]),s._v(" SQL HAVING 子句")]),s._v(" "),a("p",[a("strong",[s._v("在"),a("code",[s._v("SQL")]),s._v("中增加"),a("code",[s._v("HAVING")]),s._v("子句原因是: "),a("code",[s._v("WHERE")]),s._v("关键字无法与聚合函数一起使用")]),s._v("。")]),s._v(" "),a("p",[a("code",[s._v("HAVING")]),s._v("子句可以让我们筛选分组后的各组数据。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("having")]),s._v("关键字对"),a("code",[s._v("group by")]),s._v("分组后的数据进行过滤")]),s._v(" "),a("li",[a("code",[s._v("having")]),s._v("支持"),a("code",[s._v("where")]),s._v("的所有操作符和语法")])]),s._v(" "),a("h2",{attrs:{id:"where-和-having-的一些差异性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#where-和-having-的一些差异性"}},[s._v("#")]),s._v(" where 和 having 的一些差异性")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("where")]),s._v(" "),a("th",[s._v("having")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[s._v("不可以")]),s._v("使用聚合函数")]),s._v(" "),a("td",[a("strong",[s._v("可以")]),s._v("使用聚合函数")])]),s._v(" "),a("tr",[a("td",[s._v("数据 group by "),a("strong",[s._v("前")]),s._v("过滤")]),s._v(" "),a("td",[s._v("数据 group by "),a("strong",[s._v("后")]),s._v("过滤")])]),s._v(" "),a("tr",[a("td",[s._v("查询条件中"),a("strong",[s._v("不可以")]),s._v("使用字段别名")]),s._v(" "),a("td",[s._v("查询条件中"),a("strong",[s._v("可以")]),s._v("使用字段别名")])]),s._v(" "),a("tr",[a("td",[s._v("用于"),a("strong",[s._v("过滤数据行")])]),s._v(" "),a("td",[s._v("用于"),a("strong",[s._v("过滤分组后的结果集")])])]),s._v(" "),a("tr",[a("td",[s._v("根据数据表的字段直接过滤")]),s._v(" "),a("td",[s._v("根据已查询出的字段进行过滤")])])])]),s._v(" "),a("h2",{attrs:{id:"sql-having-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql-having-语法"}},[s._v("#")]),s._v(" SQL HAVING 语法")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" column_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" aggregate_function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("column_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" table_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" column_name operator "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" column_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HAVING")]),s._v(" aggregate_function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("column_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" operator "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"实战-超过5名学生的课"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实战-超过5名学生的课"}},[s._v("#")]),s._v(" 实战： 超过5名学生的课")]),s._v(" "),a("p",[s._v("有一个"),a("code",[s._v("courses")]),s._v("表 ，有: "),a("code",[s._v("student")]),s._v(" (学生) 和 "),a("code",[s._v("class")]),s._v(" (课程)。")]),s._v(" "),a("p",[s._v("请列出所有超过或等于"),a("code",[s._v("5")]),s._v("名学生的课。")]),s._v(" "),a("p",[s._v("例如，表：")]),s._v(" "),a("div",{staticClass:"language-markdown line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-markdown"}},[a("code",[s._v("+---------+------------+\n| student | class      |\n+---------+------------+\n| A       | Math       |\n| B       | English    |\n| C       | Math       |\n| D       | Biology    |\n| E       | Math       |\n| F       | Computer   |\n| G       | Math       |\n| H       | Math       |\n| I       | Math       |\n+---------+------------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("应该输出:")]),s._v(" "),a("div",{staticClass:"language-markdown line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-markdown"}},[a("code",[s._v("+---------+\n| class   |\n+---------+\n| Math    |\n+---------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("提示：学生在每个课中不应被重复计算。")]),s._v(" "),a("ul",[a("li",[s._v("来源：力扣（LeetCode）")]),s._v(" "),a("li",[s._v("链接：https://leetcode-cn.com/problems/classes-more-than-5-students")]),s._v(" "),a("li",[s._v("著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。")])]),s._v(" "),a("h3",{attrs:{id:"题解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#题解"}},[s._v("#")]),s._v(" 题解")]),s._v(" "),a("p",[a("strong",[s._v("方法一：使用 GROUP BY 子句和子查询")])]),s._v(" "),a("p",[s._v("思路: 先统计每门课程的学生数量，再从中选择超过 5 名学生的课程。")]),s._v(" "),a("p",[s._v("算法: 使用 "),a("code",[s._v("GROUP BY")]),s._v(" 和 "),a("code",[s._v("COUNT")]),s._v(" 获得每门课程的学生数量。")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n    class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n    courses\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" class\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("注：使用 "),a("code",[s._v("DISTINCT")]),s._v(" 防止在同一门课中学生被重复计算。")]),s._v(" "),a("div",{staticClass:"language-markdown line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-markdown"}},[a("code",[a("span",{pre:!0,attrs:{class:"token table"}},[a("span",{pre:!0,attrs:{class:"token table-header-row"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-header important"}},[s._v(" class    ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-header important"}},[s._v(" COUNT(student) ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("\n")]),a("span",{pre:!0,attrs:{class:"token table-line"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("----------")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("----------------")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("\n")]),a("span",{pre:!0,attrs:{class:"token table-data-rows"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-data"}},[s._v(" Biology  ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-data"}},[s._v(" 1              ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-data"}},[s._v(" Computer ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-data"}},[s._v(" 1              ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-data"}},[s._v(" English  ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-data"}},[s._v(" 1              ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-data"}},[s._v(" Math     ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token table-data"}},[s._v(" 6              ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("\n")])])])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("使用上面查询结果的临时表进行子查询，筛选学生数量超过"),a("code",[s._v("5")]),s._v("的课程。")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n    class\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n        class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" num\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n        courses\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" temp_table\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n    num "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("注："),a("code",[s._v("COUNT(student)")]),s._v(" 不能直接在 "),a("code",[s._v("WHERE")]),s._v(" 子句中使用，这里将其重命名为 "),a("code",[s._v("num")]),s._v("。")]),s._v(" "),a("p",[a("strong",[s._v("方法二：使用 "),a("code",[s._v("GROUP BY")]),s._v(" 和 "),a("code",[s._v("HAVING")]),s._v(" 条件【通过】")])]),s._v(" "),a("p",[s._v("算法: 在 "),a("code",[s._v("GROUP BY")]),s._v(" 子句后使用 "),a("code",[s._v("HAVING")]),s._v(" 条件是实现子查询的一种更加简单直接的方法。")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n    class\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n    courses\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" class\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HAVING")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("hr"),s._v(" "),a("p",[a("strong",[s._v("参考文档")])]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.runoob.com/sql/sql-having.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("SQL HAVING 子句 | 菜鸟教程"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.runoob.com/sql/sql-having.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("596. 超过5名学生的课"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);