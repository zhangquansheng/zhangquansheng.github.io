(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{302:function(s,a,e){"use strict";e.r(a);var t=e(10),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"cas-ä¹è§‚é”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cas-ä¹è§‚é”"}},[s._v("#")]),s._v(" CAS ä¹è§‚é” ğŸ”¨")]),s._v(" "),a("p",[a("code",[s._v("synchronized")]),s._v(" å®é™…ä¸Šæ˜¯ä¸€ç§"),a("strong",[s._v("æ‚²è§‚é”")]),s._v("ï¼Œè¿™ç§çº¿ç¨‹ä¸€æ—¦å¾—åˆ°é”ï¼Œå…¶ä»–éœ€è¦é”çš„çº¿ç¨‹å°±æŒ‚èµ·çš„æƒ…å†µå°±æ˜¯"),a("strong",[s._v("æ‚²è§‚é”")]),s._v("ã€‚"),a("code",[s._v("CAS")]),s._v("æ“ä½œçš„å°±æ˜¯ä¹è§‚é”ï¼Œæ¯æ¬¡ä¸åŠ é”è€Œæ˜¯å‡è®¾æ²¡æœ‰å†²çªè€Œå»å®ŒæˆæŸé¡¹æ“ä½œï¼Œå¦‚æœå› ä¸ºå†²çªå¤±è´¥å°±é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚")]),s._v(" "),a("p",[a("code",[s._v("CAS")]),s._v("æ˜¯è‹±æ–‡å•è¯"),a("code",[s._v("Compare And Swap")]),s._v("çš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ¯”è¾ƒå¹¶æ›¿æ¢ã€‚")]),s._v(" "),a("p",[a("code",[s._v("CAS")]),s._v("æœºåˆ¶å½“ä¸­ä½¿ç”¨äº†3ä¸ªåŸºæœ¬æ“ä½œæ•°ï¼š"),a("code",[s._v("å†…å­˜åœ°å€V")]),s._v("ï¼Œ"),a("code",[s._v("æ—§çš„é¢„æœŸå€¼A")]),s._v("ï¼Œ"),a("code",[s._v("è¦ä¿®æ”¹çš„æ–°å€¼B")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("æ›´æ–°ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œåªæœ‰å½“å˜é‡çš„é¢„æœŸå€¼Aå’Œå†…å­˜åœ°å€Vå½“ä¸­çš„å®é™…å€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šå°†å†…å­˜åœ°å€Vå¯¹åº”çš„å€¼ä¿®æ”¹ä¸ºBã€‚")]),s._v(" "),a("p",[s._v("åŸå­æ“ä½œç±»ï¼ŒæŒ‡çš„æ˜¯"),a("code",[s._v("java.util.concurrent.atomic")]),s._v("åŒ…ä¸‹ï¼Œä¸€ç³»åˆ—ä»¥"),a("code",[s._v("Atomic")]),s._v("å¼€å¤´çš„åŒ…è£…ç±»ã€‚ä¾‹å¦‚"),a("code",[s._v("AtomicBoolean")]),s._v("ï¼Œ"),a("code",[s._v("AtomicInteger")]),s._v("ï¼Œ"),a("code",[s._v("AtomicLong")]),s._v("ã€‚å®ƒä»¬åˆ†åˆ«ç”¨äº"),a("code",[s._v("Boolean")]),s._v("ï¼Œ"),a("code",[s._v("Integer")]),s._v("ï¼Œ"),a("code",[s._v("Long")]),s._v("ç±»å‹çš„åŸå­æ€§æ“ä½œ,è€Œ"),a("code",[s._v("Atomic")]),s._v("æ“ä½œçš„åº•å±‚å®ç°æ­£æ˜¯åˆ©ç”¨çš„"),a("strong",[s._v("CASæœºåˆ¶")]),s._v("ã€‚")]),s._v(" "),a("p",[a("strong",[s._v("CASæœºåˆ¶")]),s._v(" ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œå¦‚ä¸‹å‡ ç‚¹ï¼š")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("CPU")]),s._v("å¼€é”€è¾ƒå¤§: åœ¨å¹¶å‘é‡æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œå¦‚æœè®¸å¤šçº¿ç¨‹åå¤å°è¯•æ›´æ–°æŸä¸€ä¸ªå˜é‡ï¼Œå´åˆä¸€ç›´æ›´æ–°ä¸æˆåŠŸï¼Œå¾ªç¯å¾€å¤ï¼Œä¼šç»™"),a("code",[s._v("CPU")]),s._v("å¸¦æ¥å¾ˆå¤§çš„å‹åŠ›ã€‚")]),s._v(" "),a("li",[s._v("ä¸èƒ½ä¿è¯ä»£ç å—çš„åŸå­æ€§: "),a("code",[s._v("CAS")]),s._v("æœºåˆ¶æ‰€ä¿è¯çš„åªæ˜¯ä¸€ä¸ªå˜é‡çš„åŸå­æ€§æ“ä½œï¼Œè€Œä¸èƒ½ä¿è¯æ•´ä¸ªä»£ç å—çš„åŸå­æ€§ã€‚æ¯”å¦‚éœ€è¦ä¿è¯"),a("code",[s._v("3")]),s._v("ä¸ªå˜é‡å…±åŒè¿›è¡ŒåŸå­æ€§çš„æ›´æ–°ï¼Œå°±ä¸å¾—ä¸ä½¿ç”¨"),a("code",[s._v("synchronized")]),s._v("äº†ã€‚")]),s._v(" "),a("li",[a("code",[s._v("ABA")]),s._v("é—®é¢˜ï¼š å°±æ˜¯è¯´ä»"),a("code",[s._v("A")]),s._v("å˜æˆ"),a("code",[s._v("B")]),s._v("ï¼Œç„¶åå°±å˜æˆ"),a("code",[s._v("A")]),s._v("ï¼Œä½†æ˜¯å¹¶ä¸èƒ½è¯´æ˜å…¶ä»–çº¿ç¨‹å¹¶æ²¡æ”¹å˜è¿‡å®ƒï¼Œåˆ©ç”¨"),a("code",[s._v("CAS")]),s._v("å°±å‘ç°ä¸äº†è¿™ç§æ”¹å˜ã€‚")])]),s._v(" "),a("h2",{attrs:{id:"aba-çš„è§£å†³åŠæ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aba-çš„è§£å†³åŠæ³•"}},[s._v("#")]),s._v(" ABA çš„è§£å†³åŠæ³•")]),s._v(" "),a("ul",[a("li",[s._v("åœ¨å˜é‡å‰é¢è¿½åŠ ç‰ˆæœ¬å·ï¼šæ¯æ¬¡å˜é‡æ›´æ–°å°±æŠŠç‰ˆæœ¬å·"),a("code",[s._v("+1")]),s._v("ã€‚")]),s._v(" "),a("li",[a("code",[s._v("atomic")]),s._v("åŒ…ä¸‹çš„"),a("code",[s._v("AtomicStampedReference")]),s._v("ã€"),a("code",[s._v("AtomicMarkableReference")]),s._v("æ˜¯"),a("code",[s._v("JDK")]),s._v("ä¸­è§£å†³"),a("strong",[s._v("CAS")]),s._v("ä¸­"),a("strong",[s._v("ABA")]),s._v("é—®é¢˜çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆ,ä»–ä»¬çš„åŸç†æ˜¯ç›¸åŒçš„ï¼Œå°±æ˜¯æ·»åŠ ä¸€ä¸ªæ ‡è®°æ¥è®°å½•æ›´æ”¹ï¼Œä¸¤è€…çš„åŒºåˆ«å¦‚ä¸‹ï¼š\n"),a("ul",[a("li",[a("code",[s._v("AtomicStampedReference")]),s._v(" :  åˆ©ç”¨ä¸€ä¸ªintç±»å‹çš„æ ‡è®°æ¥è®°å½•ï¼Œå®ƒèƒ½å¤Ÿè®°å½•æ”¹å˜çš„æ¬¡æ•°ã€‚")]),s._v(" "),a("li",[a("code",[s._v("AtomicMarkableReference")]),s._v(": åˆ©ç”¨ä¸€ä¸ªbooleanç±»å‹çš„æ ‡è®°æ¥è®°å½•ï¼Œåªèƒ½è®°å½•å®ƒæ”¹å˜è¿‡ï¼Œä¸èƒ½è®°å½•æ”¹å˜çš„æ¬¡æ•°ã€‚")])])])]),s._v(" "),a("h2",{attrs:{id:"unsafe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unsafe"}},[s._v("#")]),s._v(" Unsafe")]),s._v(" "),a("p",[s._v("æŸ¥çœ‹ "),a("code",[s._v("AtomicLong")]),s._v(" å®ç°CASçš„æºç ï¼Œå®ƒæ˜¯é€šè¿‡è°ƒç”¨"),a("code",[s._v("sun.misc.Unsafe")]),s._v("å®Œæˆ "),a("strong",[s._v("CASæ“ä½œ")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// java.util.concurrent.atomic.AtomicLong.class")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AtomicLong")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Number")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Serializable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   \n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * Atomically sets the value to the given updated value\n     * if the current value {@code ==} the expected value.\n     *\n     * @param expect the expected value\n     * @param update the new value\n     * @return {@code true} if successful. False return indicates that\n     * the actual value was not equal to the expected value.\n     */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("compareAndSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" expect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" unsafe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("compareAndSwapLong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" valueOffset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" expect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[a("code",[s._v("Unsafe")]),s._v(" æ˜¯ "),a("code",[s._v("sun.misc")]),s._v(" åŒ…ä¸‹çš„ä¸€ä¸ªç±»ï¼Œå¯ä»¥ç›´æ¥æ“ä½œ"),a("strong",[s._v("å †å¤–å†…å­˜")]),s._v("ï¼Œå¯ä»¥éšæ„æŸ¥çœ‹åŠä¿®æ”¹"),a("strong",[s._v("JVM")]),s._v("ä¸­è¿è¡Œæ—¶çš„æ•°æ®ï¼Œä½¿"),a("code",[s._v("Java")]),s._v("è¯­è¨€æ‹¥æœ‰äº†ç±»ä¼¼"),a("code",[s._v("C")]),s._v("è¯­è¨€æŒ‡é’ˆä¸€æ ·æ“ä½œå†…å­˜ç©ºé—´çš„èƒ½åŠ›ã€‚")]),s._v(" "),a("p",[a("code",[s._v("Unsafe")]),s._v("çš„æ“ä½œç²’åº¦ä¸æ˜¯ç±»ï¼Œè€Œæ˜¯å†…å­˜åœ°å€å’Œæ‰€å¯¹åº”çš„æ•°æ®ï¼Œå¢å¼ºäº†"),a("code",[s._v("Java")]),s._v("è¯­è¨€æ“ä½œåº•å±‚èµ„æºçš„èƒ½åŠ›ã€‚")])])}),[],!1,null,null,null);a.default=n.exports}}]);